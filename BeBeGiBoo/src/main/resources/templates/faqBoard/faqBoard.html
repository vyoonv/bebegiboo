<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymepeaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ MAIN</title>

    <th:block th:replace="~{common/common}"></th:block>
    <link rel="stylesheet" href="/css/faqBoard/faqBoard.css">
</head>
<body>
    <main>
        <!-- HEADER -->
        <th:block th:replace="~{common/header}"></th:block>

        <section class="faqList">
            <div class="faqLogo"><a href="/faqBoard/faqBoard">FAQ</a></div>
            
            <div class="list-area">

                <div class="btn-area">
                    <!-- 로그인 상태일 때만 글쓰기 버튼 노출 -->
                    <button id="insertBtn" 
                            th:if="${session.loginMember != null and session.loginMember.authority == 3}">
                            글쓰기</button>
                </div>
    
                <table class="faqHeader">
                    <tbody>
                    <tr>
                        <td><a href="/faqBoard/faqBoard">전체</a></td>
                        <td>|</td>
                        <td><a class="category-link" data-category="1">1.기부</a></td>
                        <td><a class="category-link" data-category="2">2.택배관련</a></td>
                        <td><a class="category-link" data-category="3">3.봉사활동 인증</a></td>
                        <td><a class="category-link" data-category="4">4.홈페이지</a></td>
                        <td><a class="category-link" data-category="5">5.기타</a></td>
                        <td></td>
                    </tr>
                    </tbody>
                </table>      
                <table class="faq-list">  
                    <tbody id="faqListTable">
                    <tr th:each="faqBoard : ${faqList}">
                        <td>
                            <details>
                                <input type="hidden" name="qNo" th:value="${faqBoard.qNo}">
                                <summary th:text="|[${faqBoard.categoryNo}] # ${faqBoard.question}|" id="question">
                                    질문명</summary>

                                <!-- 관리자인 경우 수정/삭제 버튼 노출 -->
                                <div th:if="${session.loginMember != null and session.loginMember.authority == 3}"
                                    id="buttons">
                                    <a th:href="@{editFaq(qNo=${faqBoard.qNo})}" id="editBtn">수정</a>
                                    <form th:action="@{deleteFaq/{qNo}(qNo=${faqBoard.qNo})}" method="post" id="deleteForm">
                                        <button id="deleteBtn">삭제</button>
                                    </form>
                                </div>  
                                <figure>
                                    <pre th:text="${faqBoard.answer}" id="answer"></pre>
                                </figure>
                                
                            </details>
                        </td>
                    </tr>
                    </tbody>   
                </table>      
            </div>

            <!-- 페이지네이션 -->
			<div class="pagination-area" id="pagination">

				<ul class="pagination" th:object="${pagination}">

					<!-- 첫 페이지로 -->
					<li><a th:href="@{/faqBoard/faqBoard(cp=1)}">&lt;&lt;</a></li>

					<!-- 이전 목록 마지막 번호로-->
					<li><a th:href="@{/faqBoard/faqBoard(cp=*{prevPage})}">&lt;</a></li>

					<!-- 특정 페이지로 -->
					
					<th:block th:each="i : *{#numbers.sequence(startPage, endPage)}">
						
						<!-- 현재 페이지 -->
						<li th:if="${i} == *{currentPage}">
							<a class="current" th:text="${i}">현재페이지</a>
						</li>
						
						<!-- 나머지 페이지 -->
						<li th:unless="${i} == *{currentPage}">
							<a th:href="@{/faqBoard/faqBoard(cp=${i})}" 
								th:text="${i}">이동할 페이지</a>
						</li>
					</th:block>
						


					
					<!-- 다음 목록 시작 번호로 -->
					<li><a th:href="@{/faqBoard/faqBoard(cp=*{nextPage})}">&gt;</a></li>

					<!-- 끝 페이지로-->
					<li><a th:href="@{/faqBoard/faqBoard(cp=*{maxPage})}">&gt;&gt;</a></li>
				</ul>
			</div>

        </section>    
        





    </main>

    <!-- 관리자모드인 경우 설정 -->
    <script th:inline="javascript">
        /*<![CDATA[*/
        document.addEventListener('DOMContentLoaded', function() {
            var loginMemberAuthority = /*[[${session.loginMember?.authority}]]*/ "관리자모드";

            // 권한이 3인 멤버인 경우 배경색 변경
            if (loginMemberAuthority === 3) {
                document.body.classList.add('authority3');
            }

        });
        /*]]>*/
    </script>


    <!-- FOOTER -->
    <th:block th:replace="~{common/footer}"></th:block>

    <script src="/js/faqBoard/faqBoard.js"></script>
</body>
</html>